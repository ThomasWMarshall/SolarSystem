<html>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style>
canvas {
  padding: 0;
  margin: auto;
  display: block;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
</style>
<head>
  <title>Solar System</title>
  <script id = "vertex-shader" type = "x-shader/x-vertex">

  attribute vec4 vPosition;
  attribute vec4 vNormal;
  attribute vec2 texCoordIn;

  uniform mat4 pMatrix;
  uniform mat4 mvMatrix;
  uniform mat4 transform;

  // Now take the normal matrix as computed by the CPU
  uniform mat4 normalMatrix;

  uniform bool ignoreLightIn;

  varying vec3 toLight;
  varying vec3 norm;
  varying vec2 texCoord;
  varying float ignoreLight;

  void main() {
    norm = normalize(mat3(normalMatrix) * vec3(vNormal));
    toLight = normalize((transform * vec4(0.,0,0,-1)).xyz);
    gl_Position = pMatrix * mvMatrix * transform * vPosition;
    texCoord = texCoordIn;
    if (ignoreLightIn) {ignoreLight = 1.0;} else {ignoreLight = 0.0;}
  }

  </script>

  <script id = "fragment-shader" type = "x-shader/x-fragment">

  precision highp float;
  varying vec3 norm;
  varying vec3 toLight;
  varying vec2 texCoord;
  varying float ignoreLight;

  uniform vec4 vColor;
  uniform sampler2D uSampler;

  void main() {
    float multiplier = (dot(toLight, norm) >= 0.0) ? pow(dot(toLight, norm),1.25): 0.0;
    if (ignoreLight > 0.5) {multiplier = 1.0;}
    gl_FragColor = vec4((multiplier * texture2D(uSampler, vec2(texCoord.x, texCoord.y))).xyz, 1.0);
  }

  </script>


  <script type="text/javascript" src="../Common/webgl-utils.js"></script>
  <script type="text/javascript" src="../Common/initShaders.js"></script>
  <script type="text/javascript" src="../Common/MV.js"></script>
  <script type="text/javascript" src="sphere.js"></script>
  <script type="text/javascript" src="solarsystem.js"></script>

</head>
<body bgcolor = $000000>

  <canvas id="gl-canvas" width="1024" height="1024">
    Error: Canvas element failed to load.
  </canvas>

</body>
</html>
